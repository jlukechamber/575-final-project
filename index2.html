<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Continents of the Mind</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
<script type="text/javascript" src="lib/leaflet.js"></script>
<script type="text/javascript" src="js/main.js"></script>

<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<style>
    #map {
        position: fixed;
        width: 50%;
    }
    #features {
        width: 50%;
        margin-left: 50%;
        font-family: sans-serif;
        overflow-y: scroll;
        background-color: #fafafa;
    }
    section {
        padding: 25px 50px;
        line-height: 25px;
        border-bottom: 1px solid #ddd;
        opacity: 0.25;
        font-size: 13px;
    }
    section.active {
        opacity: 1;
    }
    section:last-child {
        border-bottom: none;
        margin-bottom: 200px;
    }
</style>

<div id="map"></div>
<div id="features">
    <!-- put in another section (and add to array) so there is a different opening frame? with the credits to logan? changing (decreasing pitch is kinda a cool animation?) -->
    <section id="blankintro" class="active">
<h3>uhhhhhh</h3>
    </section>
    <section id="intro2">
<h3>merp</h3>
    </section>
    <section id="intro">
        <h4> Logans introduction</h4>
        <p>paragraph about stuff</p>
    </section> 

    <section id="mbody">
        <h3>mBody</h3>
        <p>
            mbody paragraph
        </p>
    </section>
    <section id="conciousness">
        <h3>Conciousness</h3>
        <p>
            conciousness paragraph
        </p>
    </section>
    <section id="subjectivity">
        <h3>Subjectivity</h3>
        <p>
            subjectivity paragraph
        </p>
    </section>
    <section id="ego">
        <h3>Ego</h3>
        <p>
            ego paragraph
        </p>
    </section>
    <section id="antiego">
        <h3>Antiego</h3>
        <p>
            Antiego
        </p>
    </section>
    <section id="other">
        <h3>Other</h3>
        <p>
            other paragraph
        </p>
    </section>
    <section id="will">
        <h3>Will</h3>
        <p>
            Will paragraph
        </p>
    </section>
    <section id="freedom">
        <h3>Freedom</h3>
        <p>
            freedom paragraph
            
        </p>
    </section>
    <section id="unconsciousness">
        <h3>Unconsciousness</h3>
        <p>
            unconsciousness paragraph
        </p>
    </section>
    <section id="objectivity">
        <h3>Objectivity</h3>
        <p>
            objectivity paragraph
        </p>
    </section>
    <section id="body">
        <h4> body stuff</h4>
        <p>paragraph about stuff</p>
    </section> 
    <section id="brain">
        <h4> brain stuff</h4>
        <p>paragraph about stuff</p>
    </section> 
    <section id="mind">
        <h4> mind stuff</h4>
        <p>paragraph about stuff</p>
    </section> 
    <section id="heart">
        <h4> heart stuff</h4>
        <p>paragraph about stuff</p>
        </section>
        <section id="soul">
            <h4> soul stuff</h4>
            <p>paragraph about stuff</p>
        </section> 
    </section> 
    <section id="everything">
        <h4> everything</h4>
        <p>paragraph about everything</p>
    </section> 
    <section id="nothing">
        <h4> nothing!!!</h4>
        <p>paragraph about crazier stuff</p>
    </section> 
</div>
<!-- how do i move the script into the js file -->
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoicmFuZGltYWVzIiwiYSI6ImNsYTJveDBuMzBqOTkzcG1oZ3dyNXE5ZjEifQ.KopBuoAxGQO2d1NO_sNSOA';
    const map = new mapboxgl.Map({
        container: 'map',
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/randimaes/clh418hoa019301p477eg0jbm',
        center: [-152.4691482, 36.1755150],
        zoom: 5,
        pitch: 80
        //lessen the pitch but increase the zoom 
    });

    const chapters = {
        'blankintro':{
            center:[-152.4691482, 36.1755150],
            zoom: 5.5,
            pitch:70,
            bearing:0,
            speed:1.5
        
        },
        'intro2':{
             center:[-152.4691482, 36.1755150],
             zoom:5.7,
             pitch:60,
             bearing:0,
             duration:2000

        },
        'intro':{
            center:[-152.4691482, 36.1755150],
            zoom:6,
            pitch:50,
            bearing:0,
            duration:4000
        },
        'mbody': {
            bearing: 27,
            center: [-154.1422696, 35.7988407],
            zoom: 8,
            pitch: 0,
            duration:4000
        },
        'conciousness': {
            duration: 2000,
            center: [-153.4242405, 36.1905128],
            zoom: 8,
            pitch: 0,
            bearing: -15
        },
        'subjectivity': {
            bearing: -10,
            center: [-152.6586802,36.7255401],
            zoom: 8,
            speed: 0.6,
            pitch: 0,
            duration:3000
        },
        'ego': {
            bearing: 0,
            center: [-151.6775737,36.4988286],
            zoom: 8,
            duration: 3000,
            pitch:0
        },
        'antiego': {
            bearing: 0,
            center: [-151.1275595, 35.9832893],
            zoom: 8,
            pitch: 0,
            duration:3000
        },
        'other': {
            bearing: 25,
            center: [-151.1461410,35.4613327],
            zoom: 8,
            duration: 3000,
            pitch: 0
        },
        'will': {
            bearing: 0,
            center: [-151.5809496,35.7875796],
            zoom: 8,
            pitch: 0,
            duration:2000
        },
        'freedom': {
            bearing: 0,
            center: [-152.4691482, 36.1755150],
            zoom: 8,
            pitch: 0,
            duration:3000
        },

        'unconsciousness': {
            bearing: 0,
            center: [-153.3573469,35.5006736],
            zoom: 8,
            pitch: 0,
            duration: 2000
        },
        'objectivity': {
            bearing: 0,
            center: [-152.5100277,35.6125384],
            zoom: 8,
            pitch: 0,
            duration: 2000

        },
        'body':{
            bearing:0,
            center:[-154.1422696, 35.7988407],
            zoom:5,
            pitch: 0
        },
        'brain':{
            bearing:0,
            center:[-153.3573469,35.5006736],
            zoom:7,
            pitch:0
        },
        'mind':{
            bearing:0,
            center:[-152.4691482, 36.1755150],
            zoom:7,
            pitch:0
        },
        'heart':{
            bearing:0,
            center:[-151.6775737,36.4988286],
            zoom:7,
            pitch:0
        },
        'soul':{
            bearing:0,
            center:[-151.1275595, 35.9832893],
            zoom:7,
            pitch:0
        },
        'everything':{
            bearing:0,
            center:[-154.1422696, 35.7988407],
            pitch:0,
            zoom:6
        },
        'nothing':{
            bearing:0,
            center:[-151.1275595, 35.9832893],
            pitch: 0,
            bearing:0
        }
    };


    let activeChapterName = 'blankintro';
    function setActiveChapter(chapterName) {
        if (chapterName === activeChapterName) return;

        map.flyTo(chapters[chapterName]);

        document.getElementById(chapterName).classList.add('active');
        document.getElementById(activeChapterName).classList.remove('active');

        activeChapterName = chapterName;
    }

    function isElementOnScreen(id) {
        const element = document.getElementById(id);
        const bounds = element.getBoundingClientRect();
        return bounds.top < window.innerHeight && bounds.bottom > 200;
    }

    // On every scroll event, check which element is on screen
    window.onscroll = () => {
        for (const chapterName in chapters) {
            if (isElementOnScreen(chapterName)) {
                setActiveChapter(chapterName);
                break;
            }
        }
    };

</script>

<div id="map2"></div>

</body>
</html>